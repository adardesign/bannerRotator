// bannerRotate, Version 1.4
// Copyright (c) Oct 3, 2010 adardesign.com
// bannerRotate is freely distributable under the terms of an MIT-style license
// This means you are free to use the code, but please leave this copyright 
(function(a){"use strict";a.fn.bannerRotate=function(b){var c={speed:500,secSpeed:500,interval:4e3,shouldHoverSwitch:false,builedNav:function(b){var c=0,d=a("<div class='controlsContainer'>").hide(),e="";for(c=0;c<b;c++){e+="<a href='#'>"}d.html(e);return d},stopAnimation:function(a){a.stop(true,true)},stopInterval:function(a){if(!a){return}window.clearInterval(a)},stopTimeout:function(a){if(!a){return}window.clearTimeout(a)},addHoverUsability:{active:true,getMiliseconds:function(){return(new Date).getTime()},timeLapsed:function(a){var b=this.getMiliseconds();return b-a}}},b=a.extend(c,b);return this.each(function(c,d){if(a(this).children().length>1){var e=a(d),f=e.children(),g=f.length,h=e.append(b.builedNav(g).fadeIn(b.secSpeed)).find(".controlsContainer a"),i=1,j=0,k,l=function(a){if(a){j=k;i=(j+1)%g}else{j=i;i=(i+1)%g}},m=0,n=false,o,p,q,r,s=function(){if(b.addHoverUsability.active){do{m=b.addHoverUsability.getMiliseconds()}while(0)}f.eq(i).fadeIn(b.speed);f.eq(j).fadeOut(b.speed);h.eq(j).removeClass("active");h.eq(i).addClass("active");l()},t=function(){o=setInterval(s,b.interval)},u=function(){if(n){return}e.find("> :gt(0)").not(".controlsContainer").each(function(b,c){var d=a(c);d.css("background",d.attr("rel"));n=true})};f.children().bind("mouseover",function(a){a.preventDefault()});e.hover(function(){b.stopInterval(o);b.stopAnimation(f)},function(){if(b.addHoverUsability.active){if(p){b.stopTimeout(p);b.stopTimeout(q)}var a=b.addHoverUsability.timeLapsed(m);if(a>=b.interval){t();s()}else{p=setTimeout(s,b.interval-a);q=setTimeout(t,b.interval-a+b.speed)}}else{t()}}).find(".controlsContainer").delegate("a","click",function(){!n&&u();var c=a(this);if(c.hasClass("active")){return false}c.siblings().removeClass("active");c.addClass("active");k=h.index(c);f.eq(j).fadeOut(b.secSpeed);f.eq(k).fadeIn(b.secSpeed,function(){f.eq(k).css("opacity",1)});if(b.addHoverUsability.active){m=b.addHoverUsability.getMiliseconds()}l(true);return false}).delegate("a","mouseover",function(){if(b.shouldHoverSwitch){a(this).click()}})}h.eq(0).addClass("active");f.not(":eq(0)").hide();t();setTimeout(u,b.interval/2);if(b.addHoverUsability.active){do{m=b.addHoverUsability.getMiliseconds()}while(0)}})}})(jQuery)